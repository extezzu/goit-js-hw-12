{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst gallery = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('.load-more');\nconst loader = document.querySelector('.loader');\n\nexport const lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n});\n\nexport function clearGallery() {\n    gallery.innerHTML = '';\n}\n\nexport function createGallery(images) {\nconst markup = images\n    .map(img => `\n        <li class=\"gallery-item\">\n            <a href=\"${img.largeImageURL}\">\n                <img src=\"${img.webformatURL}\" alt=\"${img.tags}\" />\n            </a>\n            <ul class=\"info\">\n                <li><span>Likes:</span> ${img.likes}</li>\n                <li><span>Views:</span> ${img.views}</li>\n                <li><span>Comments:</span> ${img.comments}</li>\n                <li><span>Downloads:</span> ${img.downloads}</li>\n            </ul>\n        </li>`\n    ).join('');\n\ngallery.insertAdjacentHTML('beforeend', markup);\nlightbox.refresh();\n}\n\nexport function showLoader() {\nloader.classList.add('is-visible');\n}\n\nexport function hideLoader() {\nloader.classList.remove('is-visible');\n}\n\nexport function showLoadMoreButton() {\nloadMoreBtn.classList.add('visible');\n}\n\nexport function hideLoadMoreButton() {\nloadMoreBtn.classList.remove('visible');\n}","import axios from 'axios';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '8510354-a536a728c4badadcbc80336ea';\n\nexport async function getImagesByQuery(query, page) {\nconst response = await axios.get(BASE_URL, {\n    params: {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: page,\n        per_page: 15,\n    },\n});\n\nreturn response.data;\n}","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport {\ncreateGallery,\nclearGallery,\nshowLoader,\nhideLoader,\nshowLoadMoreButton,\nhideLoadMoreButton,\n} from './js/render-functions';\n\nimport { getImagesByQuery } from './js/pixabay-api';\n\nconst form = document.querySelector('.form');\nconst loadMoreBtn = document.querySelector('.load-more');\n\nlet query = '';\nlet page = 1;\nlet totalHits = 0;\n\nform.addEventListener('submit', onSearch);\nloadMoreBtn.addEventListener('click', onLoadMore);\n\nasync function onSearch(event) {\nevent.preventDefault();\n\nquery = event.target.elements['search-text'].value.trim();\nif (!query) {\niziToast.error({\n    message: 'Please enter a search query!',\n});\nreturn;\n}\n\npage = 1;\nclearGallery();\nhideLoadMoreButton();\nshowLoader();\n\ntry {\n    const data = await getImagesByQuery(query, page);\n    totalHits = data.totalHits;\n\n    if (data.hits.length === 0) {\n    hideLoader();\n    iziToast.error({\n        message: 'Sorry, there are no images matching your search query. Please try again!',\n    });\n    return;\n}\n\ncreateGallery(data.hits);\n\n    if (page * 15 < totalHits) {\n        showLoadMoreButton();\n    }\n    } catch (error) {\n        iziToast.error({ message: 'Something went wrong...' });\n    } finally {\n    hideLoader();\n}\n}\n\nasync function onLoadMore() {\npage += 1;\nshowLoader();\n\ntry {\nconst data = await getImagesByQuery(query, page);\n\ncreateGallery(data.hits);\n\nconst cardHeight = document.querySelector('.gallery-item').getBoundingClientRect().height;\n    window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n});\n\nif (page * 15 >= totalHits) {\n    hideLoadMoreButton();\n    iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n    });\n    }\n    } catch (error) {\n        iziToast.error({ message: 'Something went wrong...' });\n    } finally {\n    hideLoader();\n}\n}"],"names":["gallery","loadMoreBtn","loader","lightbox","SimpleLightbox","clearGallery","createGallery","images","markup","img","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","BASE_URL","API_KEY","getImagesByQuery","query","page","axios","form","totalHits","onSearch","onLoadMore","event","iziToast","data","cardHeight"],"mappings":"owBAGA,MAAMA,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAc,SAAS,cAAc,YAAY,EACjDC,EAAS,SAAS,cAAc,SAAS,EAElCC,EAAW,IAAIC,EAAe,aAAc,CACrD,aAAc,MACd,aAAc,GAClB,CAAC,EAEM,SAASC,GAAe,CAC3BL,EAAQ,UAAY,EACxB,CAEO,SAASM,EAAcC,EAAQ,CACtC,MAAMC,EAASD,EACV,IAAIE,GAAO;AAAA;AAAA,uBAEOA,EAAI,aAAa;AAAA,4BACZA,EAAI,YAAY,UAAUA,EAAI,IAAI;AAAA;AAAA;AAAA,0CAGpBA,EAAI,KAAK;AAAA,0CACTA,EAAI,KAAK;AAAA,6CACNA,EAAI,QAAQ;AAAA,8CACXA,EAAI,SAAS;AAAA;AAAA,cAG3D,EAAM,KAAK,EAAE,EAEbT,EAAQ,mBAAmB,YAAaQ,CAAM,EAC9CL,EAAS,QAAO,CAChB,CAEO,SAASO,GAAa,CAC7BR,EAAO,UAAU,IAAI,YAAY,CACjC,CAEO,SAASS,GAAa,CAC7BT,EAAO,UAAU,OAAO,YAAY,CACpC,CAEO,SAASU,GAAqB,CACrCX,EAAY,UAAU,IAAI,SAAS,CACnC,CAEO,SAASY,GAAqB,CACrCZ,EAAY,UAAU,OAAO,SAAS,CACtC,CChDA,MAAMa,EAAW,2BACXC,EAAU,oCAET,eAAeC,EAAiBC,EAAOC,EAAM,CAapD,OAZiB,MAAMC,EAAM,IAAIL,EAAU,CACvC,OAAQ,CACJ,IAAKC,EACL,EAAGE,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMC,EACN,SAAU,EACb,CACL,CAAC,GAEe,IAChB,CCLA,MAAME,EAAO,SAAS,cAAc,OAAO,EACrCnB,EAAc,SAAS,cAAc,YAAY,EAEvD,IAAIgB,EAAQ,GACRC,EAAO,EACPG,EAAY,EAEhBD,EAAK,iBAAiB,SAAUE,CAAQ,EACxCrB,EAAY,iBAAiB,QAASsB,CAAU,EAEhD,eAAeD,EAASE,EAAO,CAI/B,GAHAA,EAAM,eAAc,EAEpBP,EAAQO,EAAM,OAAO,SAAS,aAAa,EAAE,MAAM,OAC/C,CAACP,EAAO,CACZQ,EAAS,MAAM,CACX,QAAS,8BACb,CAAC,EACD,MACA,CAEAP,EAAO,EACPb,IACAQ,IACAH,IAEA,GAAI,CACA,MAAMgB,EAAO,MAAMV,EAAiBC,EAAOC,CAAI,EAG/C,GAFAG,EAAYK,EAAK,UAEbA,EAAK,KAAK,SAAW,EAAG,CAC5Bf,IACAc,EAAS,MAAM,CACX,QAAS,0EACjB,CAAK,EACD,MACJ,CAEAnB,EAAcoB,EAAK,IAAI,EAEfR,EAAO,GAAKG,GACZT,GAEH,MAAe,CACZa,EAAS,MAAM,CAAE,QAAS,yBAA2B,CAAA,CAC7D,QAAc,CACVd,GACJ,CACA,CAEA,eAAeY,GAAa,CAC5BL,GAAQ,EACRR,IAEA,GAAI,CACJ,MAAMgB,EAAO,MAAMV,EAAiBC,EAAOC,CAAI,EAE/CZ,EAAcoB,EAAK,IAAI,EAEvB,MAAMC,EAAa,SAAS,cAAc,eAAe,EAAE,sBAAuB,EAAC,OAC/E,OAAO,SAAS,CAChB,IAAKA,EAAa,EAClB,SAAU,QACd,CAAC,EAEGT,EAAO,IAAMG,IACbR,IACAY,EAAS,KAAK,CACV,QAAS,4DACjB,CAAK,EAEA,MAAe,CACZA,EAAS,MAAM,CAAE,QAAS,yBAA2B,CAAA,CAC7D,QAAc,CACVd,GACJ,CACA"}